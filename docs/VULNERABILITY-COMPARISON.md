# ðŸ“Š AnÃ¡lisis Comparativo de Vulnerabilidades

**Fecha del anÃ¡lisis**: 17 de enero de 2026  
**Herramienta**: Trivy v0.68

## Resumen Ejecutivo

| MÃ©trica | Imagen Insegura | Imagen Segura | ReducciÃ³n |
|---------|-----------------|---------------|-----------|
| **TamaÃ±o** | 1.22 GB | 90.4 MB | **92.6%** |
| **Total CVEs** | 1,257 | 29 | **97.7%** |
| **CRITICAL** | 78 | 0 | **100%** |
| **HIGH** | 408 | 1 | **99.8%** |
| **MEDIUM** | 530 | 9 | **98.3%** |
| **LOW** | 241 | 19 | **92.1%** |

> âœ… **Excelente resultado**: La imagen segura ha logrado eliminar **todos los CVEs crÃ­ticos** y reducir significativamente las vulnerabilidades en todas las categorÃ­as.

## DistribuciÃ³n de Vulnerabilidades

### Imagen Insegura (`demo-app:insecure`)
```
CRITICAL â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  78 (6.2%)
HIGH     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 408 (32.5%)
MEDIUM   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 530 (42.2%)
LOW      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 241 (19.2%)
         â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
         TOTAL: 1,257 vulnerabilidades
```

### Imagen Segura (`demo-app:secure`)
```
CRITICAL â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   0 (0%)
HIGH     â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   1 (3.4%)
MEDIUM   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   9 (31.0%)
LOW      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  19 (65.5%)
         â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
         TOTAL: 29 vulnerabilidades
```

## Factores de ReducciÃ³n

| Factor | Imagen Insegura | Imagen Segura |
|--------|-----------------|---------------|
| Base image | `python:latest` (Debian 13.3) | `python:3.12-alpine3.23` |
| TamaÃ±o base | ~1.1 GB | ~50 MB |
| Paquetes OS | ~600 paquetes Debian | ~15 paquetes Alpine |
| Herramientas extra | curl, wget, vim, netcat, sudo, etc. | Ninguna |
| Build tools | gcc, make permanentes | Solo en stage builder (eliminados) |
| Usuario | root | appuser (UID 1001) |
| Secretos | 6 variables hardcoded | Ninguno |
| Health checks | No | SÃ­ (cada 30s) |

## Recomendaciones

1. **Implementado exitosamente**: La imagen segura ha eliminado todos los CVEs crÃ­ticos
2. **Para producciÃ³n**: Configurar pipeline CI/CD que bloquee deploys con CVEs CRITICAL/HIGH
3. **Mantenimiento**: Re-escanear mensualmente para detectar nuevas vulnerabilidades
4. **Monitoreo continuo**: Implementar alertas automÃ¡ticas cuando aparezcan nuevos CVEs en la imagen base

## Archivos de Reporte

Los reportes completos en JSON estÃ¡n en la carpeta `reports/`:
- `insecure-report.json` - Detalles completos imagen insegura
- `secure-report.json` - Detalles completos imagen segura

## Comandos de Escaneo Utilizados

```bash
# Escanear imagen insecure
trivy image --severity CRITICAL,HIGH,MEDIUM,LOW \
  --format json --output reports/insecure-report.json \
  demo-app:insecure

# Escanear imagen secure
trivy image --severity CRITICAL,HIGH,MEDIUM,LOW \
  --format json --output reports/secure-report.json \
  demo-app:secure
```

## Impacto de las Mejoras

El hardening implementado ha logrado:

- âœ… **97.7% reducciÃ³n** en vulnerabilidades totales
- âœ… **100% eliminaciÃ³n** de CVEs crÃ­ticos
- âœ… **99.8% reducciÃ³n** en CVEs de alta severidad
- âœ… **92.6% reducciÃ³n** en tamaÃ±o de imagen
- âœ… **Principio de mÃ­nimo privilegio** aplicado (usuario no-root)
- âœ… **Superficie de ataque minimizada** (sin herramientas innecesarias)
- âœ… **Multi-stage build** para eliminar dependencias de compilaciÃ³n

---

**Autor**: Victor LÃ³pez Valero  
**Fecha**: Enero 2026  
**InstituciÃ³n**: Universidad PolitÃ©cnica de Madrid
